# 2022

These are my entries into the [advent of code 2022](https://adventofcode.com/2022) using the "language" [jq](https://stedolan.github.io/jq/) (more of a JSON transform processor than for programming, but we'll make it do!).

## Solved

Below include live demos to the solutions that you can edit and see the results change in real time.

- Day 1 [part 1](https://jqterm.com/ff764509777096eb5a92fc89baa13547?query=split%28%22%5Cn%5Cn%22%29%20%7C%20map%28split%28%22%5Cn%22%29%20%7C%20map%28tonumber%3F%29%20%7C%20add%29%20%7C%20max&slurp=true&raw-input=true), [part 2](https://jqterm.com/ff764509777096eb5a92fc89baa13547?query=split%28%22%5Cn%5Cn%22%29%20%7C%20map%28split%28%22%5Cn%22%29%20%7C%20map%28tonumber%3F%29%20%7C%20add%29%20%7C%20sort%5B-3%3A%5D%20%7C%20add&slurp=true&raw-input=true)
- Day 2 [part 1](https://jqterm.com/a41db175eab863e7205a04275edf2da7?query=def%20values%3A%20%7B%20A%3A%20-1%2C%20B%3A%20-2%2C%20C%3A%20-3%2C%20X%3A%201%2C%20Y%3A%202%2C%20Z%3A%203%20%7D%5B.%5D%3B%0A%0A%23%20-2%20%3D%20win%2C%20-1%20%3D%20lose%2C%200%20%3D%20draw%2C%201%20%3D%20win%2C%202%20%3D%20lose%0A%23%20so%20we%20adjust%20the%20values%20for%20the%20scoring%0Adef%20score%3A%0A%20%20add%20%7C%0A%20%20if%20.%20%3D%3D%20-2%20then%201%0A%20%20elif%20.%20%3D%3D%202%20then%20-1%0A%20%20else%20.%0A%20%20end%0A%3B%0A%0Adef%20scoring%3A%20if%20.%20%3C%200%20then%200%20elif%20.%20%3D%3D%200%20then%203%20else%206%20end%3B%0A%0A%7B%20A%3A%20%22X%22%2C%20B%3A%20%22Y%22%2C%20C%3A%20%22Z%22%20%7D%20as%20%24draw%20%7C%0A%7B%20A%3A%20%22Y%22%2C%20B%3A%20%22Z%22%2C%20C%3A%20%22X%22%20%7D%20as%20%24win%20%7C%0A%7B%20A%3A%20%22Z%22%2C%20B%3A%20%22X%22%2C%20C%3A%20%22Y%22%20%7D%20as%20%24lose%20%7C%0A%0Adef%20predict%3A%0A%09if%20.%5B1%5D%20%3D%3D%20%22X%22%20then%20%5B.%5B0%5D%2C%20%24lose%5B.%5B0%5D%5D%5D%0A%09elif%20.%5B1%5D%20%3D%3D%20%22Y%22%20then%20%5B.%5B0%5D%2C%20%24draw%5B.%5B0%5D%5D%5D%0A%09else%20%5B.%5B0%5D%2C%20%24win%5B.%5B0%5D%5D%5D%0A%09end%0A%3B%0A%0Asplit%28%22%5Cn%22%29%20%7C%0Amap%28%0A%20%20select%28.%20!%3D%20%22%22%29%20%7C%20%23%20filter%20empty%0A%20%20split%28%22%20%22%29%20%7C%20%23%20get%20left%20and%20right%0A%20%20predict%20%7C%0A%20%20map%28values%29%20%7C%20%23%20convert%20to%20scoring%0A%20%20score%20as%20%24win%20%7C%20%23%20capture%20whether%20it%20was%20win%2C%20lose%20or%20draw%0A%20%20.%5B1%5D%20%2B%20%28%24win%20%7C%20scoring%29%0A%29%20%7C%20add%0A&slurp=true&raw-input=true), [part 2](https://jqterm.com/a41db175eab863e7205a04275edf2da7?query=def%20values%3A%20%7B%20A%3A%20-1%2C%20B%3A%20-2%2C%20C%3A%20-3%2C%20X%3A%201%2C%20Y%3A%202%2C%20Z%3A%203%20%7D%5B.%5D%3B%0A%0A%23%20-2%20%3D%20win%2C%20-1%20%3D%20lose%2C%200%20%3D%20draw%2C%201%20%3D%20win%2C%202%20%3D%20lose%0A%23%20so%20we%20adjust%20the%20values%20for%20the%20scoring%0Adef%20score%3A%0A%20%20add%20%7C%0A%20%20if%20.%20%3D%3D%20-2%20then%201%0A%20%20elif%20.%20%3D%3D%202%20then%20-1%0A%20%20else%20.%0A%20%20end%0A%3B%0A%0Adef%20scoring%3A%20if%20.%20%3C%200%20then%200%20elif%20.%20%3D%3D%200%20then%203%20else%206%20end%3B%0A%0A%7B%20A%3A%20%22X%22%2C%20B%3A%20%22Y%22%2C%20C%3A%20%22Z%22%20%7D%20as%20%24draw%20%7C%0A%7B%20A%3A%20%22Y%22%2C%20B%3A%20%22Z%22%2C%20C%3A%20%22X%22%20%7D%20as%20%24win%20%7C%0A%7B%20A%3A%20%22Z%22%2C%20B%3A%20%22X%22%2C%20C%3A%20%22Y%22%20%7D%20as%20%24lose%20%7C%0A%0Adef%20predict%3A%0A%09if%20.%5B1%5D%20%3D%3D%20%22X%22%20then%20%5B.%5B0%5D%2C%20%24lose%5B.%5B0%5D%5D%5D%0A%09elif%20.%5B1%5D%20%3D%3D%20%22Y%22%20then%20%5B.%5B0%5D%2C%20%24draw%5B.%5B0%5D%5D%5D%0A%09else%20%5B.%5B0%5D%2C%20%24win%5B.%5B0%5D%5D%5D%0A%09end%0A%3B%0A%0Asplit%28%22%5Cn%22%29%20%7C%0Amap%28%0A%20%20select%28.%20!%3D%20%22%22%29%20%7C%20%23%20filter%20empty%0A%20%20split%28%22%20%22%29%20%7C%20%23%20get%20left%20and%20right%0A%20%20predict%20%7C%0A%20%20map%28values%29%20%7C%20%23%20convert%20to%20scoring%0A%20%20score%20as%20%24win%20%7C%20%23%20capture%20whether%20it%20was%20win%2C%20lose%20or%20draw%0A%20%20.%5B1%5D%20%2B%20%28%24win%20%7C%20scoring%29%0A%29%20%7C%20add%0A&slurp=true&raw-input=true)
- Day 3 [part 1](https://jqterm.com/0a9a8041baad77b6f10715a57fff4adf?query=def%20mapToNumbers%3A%20explode%20%7C%20map%28.%20-%2096%29%20%7C%20map%28if%20.%20%3C%200%20then%20.%20%2B%2058%20else%20.%20end%29%3B%0A%0Adef%20findRepeating%3A%0A%20%20length%20as%20%24l%20%7C%20split%28%22%22%29%20%7C%0A%20%20%28reduce%20.%5B0%3A%24l%2F2%5D%5B%5D%20as%20%24_%20%28%7B%7D%3B%20.%20%2B%20%7B%20%22%5C%28%24_%29%22%3A%201%20%7D%20%29%29%20as%20%24start%20%7C%0A%20%20reduce%20.%5B%24l%2F2%3A%5D%5B%5D%20as%20%24_%20%28%24start%3B%20if%20.%5B%24_%5D%20%3D%3D%201%20then%20.%5B%24_%5D%20%2B%3D%201%20else%20.%20end%29%20%7C%0A%20%20to_entries%20%7C%20map%28select%28.value%20%3E%201%29%29%20%7C%20first.key%0A%3B%0A%0Adef%20parse%3A%20split%28%22%5Cn%22%29%20%7C%20map%28select%28.%20!%3D%20%22%22%29%29%3B%0A%0Aparse%20%7C%20map%28findRepeating%29%20%7C%20join%28%22%22%29%20%7C%20mapToNumbers%20%7C%20add%0A&slurp=true&raw-input=true), [part 2](https://jqterm.com/0a9a8041baad77b6f10715a57fff4adf?query=def%20mapToNumbers%3A%20explode%20%7C%20map%28.%20-%2096%29%20%7C%20map%28if%20.%20%3C%200%20then%20.%20%2B%2058%20else%20.%20end%29%3B%0A%0Adef%20findRepeating%3A%20%0A%20%20.%20as%20%24in%20%7C%20%0A%20%20%28reduce%20%28%24in%5B0%5D%20%7C%20split%28%22%22%29%29%5B%5D%20as%20%24_%20%28%7B%7D%3B%20.%20%2B%20%7B%20%24_%3A%201%20%7D%20%29%29%20%7C%20.%20as%20%24a%20%7C%0A%20%20reduce%20%28%24in%5B1%5D%20%7C%20split%28%22%22%29%29%5B%5D%20as%20%24_%20%28%24a%3B%20if%20.%5B%24_%5D%20%3D%3D%201%20then%20.%5B%24_%5D%20%2B%3D%201%20else%20.%20end%29%20%7C%20.%20as%20%24b%20%7C%0A%20%20reduce%20%28%24in%5B2%5D%20%7C%20split%28%22%22%29%29%5B%5D%20as%20%24_%20%28%24b%3B%20if%20.%5B%24_%5D%20%3D%3D%202%20then%20.%5B%24_%5D%20%2B%3D%201%20else%20.%20end%29%20%7C%0A%20%20to_entries%20%7C%20map%28select%28.value%20%3E%202%29%29%20%7C%20first.key%0A%3B%0A%0Adef%20parse%3A%20split%28%22%5Cn%22%29%20%7C%20map%28select%28.%20!%3D%20%22%22%29%29%3B%0A%0Adef%20group%28%24n%29%3A%20.%20as%20%24input%20%7C%20reduce%20range%20%280%3B%20length%3B%20%24n%29%20as%20%24i%20%28%5B%5D%3B%20.%20%2B%20%5B%24input%5B%24i%3A%24i%2B%24n%5D%5D%29%3B%0A%0Aparse%20%7C%20group%283%29%20%7C%20map%28findRepeating%29%20%7C%20join%28%22%22%29%20%7C%20mapToNumbers%20%7C%20add&slurp=true&raw-input=true)
- Day 4 [part 1](https://jqterm.com/633b9ded392c4558cdb4e70a963272bf?query=def%20parse%3A%20split%28%22%5Cn%22%29%20%7C%20map%28select%28.%20!%3D%20%22%22%29%20%7C%20split%28%22%2C%22%29%20%7C%20map%28split%28%22-%22%29%20%7C%20map%28tonumber%29%29%29%3B%0Adef%20asRange%3A%0A%09%28flatten%20%7C%20%7B%20min%3A%20min%2C%20max%3A%20max%20%7D%29%20as%20%24range%20%7C%0A%20%20map%28%0A%20%20%20%20%28.%5B0%5D%20%3E%20%24range.min%29%20or%20%28.%5B1%5D%20%3C%20%24range.max%29%0A%20%20%29%20%7C%20select%28%28.%5B0%5D%20and%20.%5B1%5D%29%20%7C%20not%29%0A%3B%0Aparse%20%7C%20map%28asRange%29%20%7C%20length%0A&slurp=true&raw-input=true), [part 2](https://jqterm.com/633b9ded392c4558cdb4e70a963272bf?query=def%20parse%3A%20split%28%22%5Cn%22%29%20%7C%20map%28select%28.%20!%3D%20%22%22%29%20%7C%20split%28%22%2C%22%29%20%7C%20map%28split%28%22-%22%29%20%7C%20map%28tonumber%29%29%29%3B%0A%0Aparse%20%7C%20map%28%0A%09%28flatten%20%7C%20max%20-%20min%29%20as%20%24range%20%7C%20%0A%09map%28max%20-%20min%29%20%7C%20%24range%20-%20add%0A%29%20%7C%20map%28select%28.%20%3E%200%20%7C%20not%29%29%20%7C%20length&slurp=true&raw-input=true)
- Day 5 [part 1](https://jqterm.com/e800b0fd6d97106e263952a776554891?query=def%20stripEmpty%3A%20map%28select%28.%20!%3D%20%22%22%20and%20.%20!%3D%20%22%20%22%29%29%3B%0A%0Adef%20parse%3A%20split%28%22%5Cn%5Cn%22%29%20%7C%20map%28split%28%22%5Cn%22%29%20%7C%20stripEmpty%29%20%7C%20%7B%20stack%3A%20.%5B0%5D%2C%20moves%3A%20.%5B1%5D%20%7D%3B%0A%0Adef%20getRows%28%24cols%29%3A%0A%20%20.%20as%20%24stack%20%7C%0A%20%20reduce%20range%20%280%3B%20%24cols%20*%204%3B%204%29%20as%20%24i%20%28%0A%20%20%20%20%5B%5D%3B%0A%20%20%20%20.%20%2B%20%5B%24stack%5B%24i%2B1%3A%24i%2B2%5D%5D%0A%20%20%29%3B%0A%0Adef%20parseStack%3A%0A%20%20.stack%20%7C%20reverse%20as%20%24stack%20%7C%0A%20%20%28%24stack%5B0%5D%20%7C%20split%28%22%20%22%29%20%7C%20stripEmpty%20%7C%20length%29%20as%20%24cols%20%7C%0A%20%20%24stack%5B1%3A%5D%20%7C%20map%28getRows%28%24cols%29%29%20%7C%20transpose%20%7C%20map%28stripEmpty%29%0A%3B%0A%0Adef%20parseMove%3A%20split%28%22%20%22%29%20%7C%20%7B%20n%3A%20.%5B1%5D%20%7C%20tonumber%2C%20from%3A%20%28.%5B3%5D%20%7C%20tonumber%20-1%29%2C%20to%3A%20%28.%5B5%5D%20%7C%20tonumber%20-1%29%20%7D%3B%0A%0Adef%20processMoves%3A%0A%20%20reduce%20%28.moves%20%7C%20map%28parseMove%29%29%5B%5D%20as%20%24move%20%28%0A%20%20%20%20.stack%3B%20%23%20initial%20state%0A%20%20%20%20%28.%5B%24move.from%5D%5B-%24move.n%3A%5D%20%7C%20reverse%29%20as%20%24target%20%7C%20%23%20copy%0A%20%20%20%20.%5B%24move.from%5D%20%3D%20.%5B%24move.from%5D%5B%3A-%24move.n%5D%20%7C%20%23%20remove%0A%20%20%20%20.%5B%24move.to%5D%20%2B%3D%20%24target%20%23%20add%0A%20%20%29%0A%3B%0A%0Aparse%20%7C%0A.%20%2B%20%7B%20stack%3A%20parseStack%20%7D%20%7C%0AprocessMoves%20%7C%0Amap%28.%5B-1%5D%29%20%7C%20%0Ajoin%28%22%22%29%0A&slurp=true&raw-input=true&raw=true), [part 2](https://jqterm.com/e800b0fd6d97106e263952a776554891?query=def%20stripEmpty%3A%20map%28select%28.%20!%3D%20%22%22%20and%20.%20!%3D%20%22%20%22%29%29%3B%0A%0Adef%20parse%3A%20split%28%22%5Cn%5Cn%22%29%20%7C%20map%28split%28%22%5Cn%22%29%20%7C%20stripEmpty%29%20%7C%20%7B%20stack%3A%20.%5B0%5D%2C%20moves%3A%20.%5B1%5D%20%7D%3B%0A%0Adef%20getRows%28%24cols%29%3A%0A%20%20.%20as%20%24stack%20%7C%0A%20%20reduce%20range%20%280%3B%20%24cols%20*%204%3B%204%29%20as%20%24i%20%28%0A%20%20%20%20%5B%5D%3B%0A%20%20%20%20.%20%2B%20%5B%24stack%5B%24i%2B1%3A%24i%2B2%5D%5D%0A%20%20%29%3B%0A%0Adef%20parseStack%3A%0A%20%20.stack%20%7C%20reverse%20as%20%24stack%20%7C%0A%20%20%28%24stack%5B0%5D%20%7C%20split%28%22%20%22%29%20%7C%20stripEmpty%20%7C%20length%29%20as%20%24cols%20%7C%0A%20%20%24stack%5B1%3A%5D%20%7C%20map%28getRows%28%24cols%29%29%20%7C%20transpose%20%7C%20map%28stripEmpty%29%0A%3B%0A%0Adef%20parseMove%3A%20split%28%22%20%22%29%20%7C%20%7B%20n%3A%20.%5B1%5D%20%7C%20tonumber%2C%20from%3A%20%28.%5B3%5D%20%7C%20tonumber%20-1%29%2C%20to%3A%20%28.%5B5%5D%20%7C%20tonumber%20-1%29%20%7D%3B%0A%0Adef%20processMoves%3A%0A%20%20reduce%20%28.moves%20%7C%20map%28parseMove%29%29%5B%5D%20as%20%24move%20%28%0A%20%20%20%20.stack%3B%20%23%20initial%20state%0A%20%20%20%20.%5B%24move.from%5D%5B-%24move.n%3A%5D%20as%20%24target%20%7C%20%23%20copy%0A%20%20%20%20.%5B%24move.from%5D%20%3D%20.%5B%24move.from%5D%5B%3A-%24move.n%5D%20%7C%20%23%20remove%0A%20%20%20%20.%5B%24move.to%5D%20%2B%3D%20%24target%20%23%20add%0A%20%20%29%0A%3B%0A%0Aparse%20%7C%0A.%20%2B%20%7B%20stack%3A%20parseStack%20%7D%20%7C%0AprocessMoves%20%7C%0Amap%28.%5B-1%5D%29%20%7C%20%0Ajoin%28%22%22%29%0A&slurp=true&raw-input=true&raw=true) (solution to day 2 is simply removing `reverse` in the code)
- Day 6 [part 1](https://jqterm.com/656c5189b2346d56b2ad5c9f4af97402?query=4%20as%20%24n%20%7C%0A.%20as%20%24input%20%7C%0A0%20%7C%20until%28%0A%20%20%28%24input%5B.%3A.%2B%24n%5D%20%7C%20explode%20%7C%20unique%20%7C%20length%29%20%3D%3D%20%24n%3B%0A%20%20.%20%2B%201%0A%29%20%7C%0A.%20%2B%20%24n&slurp=true&raw-input=true), [part 2](https://jqterm.com/656c5189b2346d56b2ad5c9f4af97402?query=14%20as%20%24n%20%7C%0A.%20as%20%24input%20%7C%0A0%20%7C%20until%28%0A%20%20%28%24input%5B.%3A.%2B%24n%5D%20%7C%20explode%20%7C%20unique%20%7C%20length%29%20%3D%3D%20%24n%3B%0A%20%20.%20%2B%201%0A%29%20%7C%0A.%20%2B%20%24n&slurp=true&raw-input=true)
- Day 7 [part 1](https://jqterm.com/edc25c50ed0c5168f221a6f934bb0824?query=def%20log%28s%29%3A%20.%20as%20%24_%20%7C%20%5Bs%5D%20%7C%20debug%20%7C%20%24_%3B%0Adef%20parse%3A%20split%28%22%5Cn%22%29%20%7C%20map%28select%28.%20!%3D%20%22%22%29%29%3B%0Adef%20parseLine%3A%0A%09split%28%22%20%22%29%20%7C%0A%09if%20.%5B0%5D%20%3D%3D%20%22dir%22%20then%0A%09%09%7B%20file%3A%20%22%5C%28.%5B1%5D%29%22%2C%20contents%3A%20%7B%7D%2C%20type%3A%20%22dir%22%20%7D%0A%09else%0A%09%09%7B%20file%3A%20%22%5C%28.%5B1%5D%29%22%2C%20size%3A%20.%5B0%5D%20%7C%20tonumber%2C%20type%3A%20%22file%22%20%7D%0A%09end%0A%3B%0A%0Adef%20cd%28%24path%29%3A%0A%20%20if%20%24path%20%3D%3D%20%22..%22%20then%0A%20%20%20%20.pwd%20%3D%20.pwd%5B%3A-1%5D%20%23%20pop%0A%20%20else%0A%20%20%20%20.pwd%20%2B%3D%20%5B%24path%5D%20%7C%0A%20%20%20%20setpath%28.pwd%3B%20%7B%20_files%3A%20%5B%5D%20%7D%29%0A%20%20end%0A%3B%0A%0Adef%20doCommand%28%24cmd%29%3A%0A%09if%20%28%24cmd%20%7C%20startswith%28%22%24%20cd%22%29%29%20then%0A%09%09%28%24cmd%20%7C%20split%28%22%20%22%29%20%7C%20.%5B2%5D%29%20as%20%24path%20%7C%0A%20%20%20%20cd%28%24path%29%0A%09elif%20%24cmd%20%7C%20startswith%28%22%24%20ls%22%29%20then%0A%20%20%20%20.%0A%09else%0A%20%20%20%20%28%24cmd%20%7C%20parseLine%29%20as%20%24res%20%7C%0A%20%20%20%20if%20%24res.type%20%3D%3D%20%22file%22%20then%0A%20%20%20%20%20%20%28getpath%28.pwd%20%2B%20%5B%22_files%22%5D%29%20%2B%20%5B%24res%5D%29%20as%20%24res%20%7C%0A%20%20%20%20%20%20setpath%28.pwd%20%2B%20%5B%22_files%22%5D%3B%20%24res%29%0A%20%20%20%20else%20.%20end%0A%09end%0A%3B%0A%0Adef%20buildTree%28%24fs%29%3A%0A%20%20reduce%20.%5B%5D%20as%20%24line%20%28%0A%20%20%20%20%24fs%3B%20%23%20initial%20state%0A%20%20%20%20doCommand%28%24line%29%0A%20%20%29%0A%3B%0A%0Adef%20calc%3A%0A%20%20walk%28%0A%20%20%20%20if%20type%20%3D%3D%20%22object%22%20and%20._files%3F%20then%0A%20%20%20%20%20._size%20%3D%20%28%5B..%5D%20%7C%20map%28select%28._files%3F%29._files%20%7C%20map%28.size%29%20%7C%20add%29%29%0A%20%20%20%20else%20.%20end%0A%20%20%29%0A%3B%0A%0Adef%20total%3A%0A%20%20%5B..%5D%20%7C%20map%28select%28._size%3F%29._size%20%7C%20add%29%20%7C%20map%28select%28.%20%3C%3D%20100000%29%29%20%7C%20add%0A%3B%0A%0A%7B%20%22%2F%22%3A%20%7B%7D%2C%20%22pwd%22%3A%20%5B%22%2F%22%5D%20%7D%20as%20%24fs%20%7C%0A%0Aparse%5B1%3A%5D%20%7C%20buildTree%28%24fs%29%20%7C%20calc%20%7C%20total%0A&slurp=true&raw-input=true), [part 2](https://jqterm.com/edc25c50ed0c5168f221a6f934bb0824?query=def%20log%28s%29%3A%20.%20as%20%24_%20%7C%20%5Bs%5D%20%7C%20debug%20%7C%20%24_%3B%0Adef%20parse%3A%20split%28%22%5Cn%22%29%20%7C%20map%28select%28.%20!%3D%20%22%22%29%29%3B%0Adef%20parseLine%3A%0A%09split%28%22%20%22%29%20%7C%0A%09if%20.%5B0%5D%20%3D%3D%20%22dir%22%20then%0A%09%09%7B%20file%3A%20%22%5C%28.%5B1%5D%29%22%2C%20contents%3A%20%7B%7D%2C%20type%3A%20%22dir%22%20%7D%0A%09else%0A%09%09%7B%20file%3A%20%22%5C%28.%5B1%5D%29%22%2C%20size%3A%20.%5B0%5D%20%7C%20tonumber%2C%20type%3A%20%22file%22%20%7D%0A%09end%0A%3B%0A%0Adef%20cd%28%24path%29%3A%0A%20%20if%20%24path%20%3D%3D%20%22..%22%20then%0A%20%20%20%20.pwd%20%3D%20.pwd%5B%3A-1%5D%20%23%20pop%0A%20%20else%0A%20%20%20%20.pwd%20%2B%3D%20%5B%24path%5D%20%7C%0A%20%20%20%20setpath%28.pwd%3B%20%7B%20_files%3A%20%5B%5D%20%7D%29%0A%20%20end%0A%3B%0A%0Adef%20doCommand%28%24cmd%29%3A%0A%09if%20%28%24cmd%20%7C%20startswith%28%22%24%20cd%22%29%29%20then%0A%09%09%28%24cmd%20%7C%20split%28%22%20%22%29%20%7C%20.%5B2%5D%29%20as%20%24path%20%7C%0A%20%20%20%20cd%28%24path%29%0A%09elif%20%24cmd%20%7C%20startswith%28%22%24%20ls%22%29%20then%0A%20%20%20%20.%0A%09else%0A%20%20%20%20%28%24cmd%20%7C%20parseLine%29%20as%20%24res%20%7C%0A%20%20%20%20if%20%24res.type%20%3D%3D%20%22file%22%20then%0A%20%20%20%20%20%20%28getpath%28.pwd%20%2B%20%5B%22_files%22%5D%29%20%2B%20%5B%24res%5D%29%20as%20%24res%20%7C%0A%20%20%20%20%20%20setpath%28.pwd%20%2B%20%5B%22_files%22%5D%3B%20%24res%29%0A%20%20%20%20else%20.%20end%0A%09end%0A%3B%0A%0Adef%20buildTree%28%24fs%29%3A%0A%20%20reduce%20.%5B%5D%20as%20%24line%20%28%0A%20%20%20%20%24fs%3B%20%23%20initial%20state%0A%20%20%20%20doCommand%28%24line%29%0A%20%20%29%0A%3B%0A%0Adef%20calc%3A%0A%20%20walk%28%0A%20%20%20%20if%20type%20%3D%3D%20%22object%22%20and%20._files%3F%20then%0A%20%20%20%20%20._size%20%3D%20%28%5B..%5D%20%7C%20map%28select%28._files%3F%29._files%20%7C%20map%28.size%29%20%7C%20add%29%29%0A%20%20%20%20else%20.%20end%0A%20%20%29%0A%3B%0A%0Adef%20totals%3A%0A%20%20%5B..%5D%20%7C%20map%28select%28._size%3F%29._size%20%7C%20add%29%0A%3B%0A%0A%7B%20%22%2F%22%3A%20%7B%7D%2C%20%22pwd%22%3A%20%5B%22%2F%22%5D%20%7D%20as%20%24fs%20%7C%0A70000000%20as%20%24total%20%7C%0A30000000%20as%20%24min%20%7C%0Aparse%5B1%3A%5D%20%7C%20buildTree%28%24fs%29%20%7C%0Acalc%20%7C%0Atotals%20%7C%0Asort%20%7C%0A%28%24total%20-%20last%29%20as%20%24available%20%7C%0Amap%28select%28%0A%20%20%28%24available%20%2B%20.%29%20%3E%20%24min%0A%29%29%20%7C%20first%0A&slurp=true&raw-input=true)
- Day 8 [part 1](https://jqterm.com/a1d8b5dbbc82a3775431a28dc3cbda9d?query=def%20parse%3A%0A%09split%28%22%5Cn%22%29%20%7C%0A%09map%28select%28.%20!%3D%20%22%22%29%20%7C%0A%09%20%20%20%20split%28%22%22%29%20%7C%0A%09%09map%28tonumber%29%0A%09%29%20%7C%0A%09to_entries%20%7C%0A%09map%28%0A%09%09.key%20as%20%24y%20%7C%0A%20%20%20%20%20%20%09.value%20%7C%0A%20%20%20%20%20%20%09to_entries%20%7C%0A%20%20%20%20%20%20%09map%28%0A%09%09%09.%20%2B%20%7B%20x%3A%20.key%2C%20y%3A%20%24y%20%7D%20%7C%0A%20%20%20%20%20%20%20%20%20%20%09del%28.key%29%0A%09%09%29%0A%09%29%0A%3B%0A%0Adef%20find%28%24trees%29%3A%0A%20%20%24trees%20%7C%0A%09.%5B1%3A-1%5D%20%7C%0A%20%20map%28%0A%20%20%20%20first%20as%20%24first%20%7C%0A%20%20%20%20.%5B1%3A-1%5D%20%7C%0A%20%20%20%20%20%20%23%20log%28%24first%2C.%29%7C%0A%20%20%20%20reduce%20.%5B%5D%20as%20%24_%20%28%0A%20%20%20%20%20%20%5B%24first%5D%3B%0A%20%20%20%20%20%20if%20%24_.value%20%3E%20last.value%20then%0A%20%20%20%20%20%20%20%20.%20%2B%20%5B%24_%5D%0A%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20.%0A%20%20%20%20%20%20end%0A%20%20%20%20%29%20%7C%20.%5B1%3A%5D%0A%20%20%29%0A%3B%0A%0Aparse%20%7C%0A.%20as%20%24input%20%7C%0A%5B%0A%20%20find%28.%29%2C%0A%20%20find%28map%28reverse%29%29%2C%0A%20%20find%28transpose%29%2C%0A%20%20find%28transpose%20%7C%20map%28reverse%29%29%0A%5D%20%7C%0Aflatten%20%7C%0Amap%28select%28.%20!%3D%20null%29%29%20%7C%0Aunique%20%7C%0Alength%20as%20%24inner%20%7C%0A%24input%20%7C%0Afirst%20%7C%0Alength%20*%202%20%2B%20%28%24input%20%7C%20transpose%20%7C%20first%20%7C%20%28length%20-%202%29%20*%202%29%20%2B%20%24inner%0A&slurp=true&raw-input=true), [part 2](https://jqterm.com/a1d8b5dbbc82a3775431a28dc3cbda9d?query=def%20parse%3A%0A%09split%28%22%5Cn%22%29%20%7C%0A%09map%28select%28.%20!%3D%20%22%22%29%20%7C%0A%09%20%20%20%20split%28%22%22%29%20%7C%0A%09%09map%28tonumber%29%0A%09%29%20%7C%0A%09to_entries%20%7C%0A%09map%28%0A%09%09.key%20as%20%24y%20%7C%0A%20%20%20%20%20%20%09.value%20%7C%0A%20%20%20%20%20%20%09to_entries%20%7C%0A%20%20%20%20%20%20%09map%28%0A%09%09%09.%20%2B%20%7B%20x%3A%20.key%2C%20y%3A%20%24y%20%7D%20%7C%0A%20%20%20%20%20%20%20%20%20%20%09del%28.key%29%0A%09%09%29%0A%09%29%0A%3B%0A%0Adef%20find%3A%0A%20%20map%28%20%23%20each%20row%0A%20%20%20%20.%20as%20%24input%20%7C%0A%20%20%20%20%5Bforeach%20range%280%3B%20length%29%20as%20%24i%20%28%0A%20%20%20%20%20%20%24input%5B0%5D%3B%0A%20%20%20%20%20%20%24input%5B%24i%5D%20as%20%24current%20%7C%0A%20%20%20%20%20%20%24input%5B%24i%2B1%3A%5D%20%7C%0A%20%20%20%20%20%20length%20as%20%24n%20%7C%0A%20%20%20%20%20%20if%20%24n%20%3D%3D%200%20then%0A%20%20%20%20%20%20%20%200%0A%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20until%28%0A%20%20%20%20%20%20%20%20%20%20%28length%20%3D%3D%200%29%20or%20%28first.value%20%3E%3D%20%24current.value%29%3B%0A%20%20%20%20%20%20%20%20%20%20.%5B1%3A%5D%0A%20%20%20%20%20%20%20%20%29%20%7C%0A%0A%20%20%20%20%20%20%20%20if%20length%20%3D%3D%200%20then%0A%20%20%20%20%20%20%20%20%20%200%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20length%20-%201%0A%20%20%20%20%20%20%20%20end%20%7C%0A%0A%20%20%20%20%20%20%20%20%28%24n%20-%20length%29%0A%20%20%20%20%20%20end%20%7C%0A%20%20%20%20%20%20.%20as%20%24score%20%7C%0A%0A%20%20%20%20%20%20%24input%5B%24i%5D%20%2B%20%7B%20score%3A%20%28%24score%20*%20%28%24input%5B%24i%5D.score%20%2F%2F%201%29%29%20%7D%0A%20%20%20%20%20%20%3B%0A%0A%20%20%20%20%20%20.%20%23%20emit%0A%20%20%20%20%29%5D%0A%20%20%29%0A%3B%0A%0Aparse%20%7C%0Afind%20%7C%0Amap%28reverse%29%20%7C%0Afind%20%7C%0Atranspose%20%7C%0Afind%20%7C%0Amap%28reverse%29%20%7C%0Afind%20%7C%0Aflatten%20%7C%0Amax_by%28.score%29%20%7C%0A.score%0A&slurp=true&raw-input=true)
- Day 9 [part 1](https://jqterm.com/304f9590d16035b539a8435f44440896?query=def%20parse%3A%20split%28%22%5Cn%22%29%20%7C%20map%28select%28.%20!%3D%20%22%22%29%20%7C%20split%28%22%20%22%29%20%7C%20%7B%20dir%3A%20.%5B0%5D%2C%20n%3A%20.%5B1%5D%20%7C%20tonumber%20%7D%29%20%3B%0A%0Adef%20calcGrid%3A%0A%20%20%5B%7B%20%20x%3A%200%2C%20y%3A%200%20%7D%5D%20as%20%24grid%20%7C%0A%20%20.%20as%20%24steps%20%7C%0A%20%20reduce%20range%280%3B%20length%29%20as%20%24i%20%28%0A%20%20%20%20%24grid%3B%0A%20%20%20%20if%20%24steps%5B%24i%5D.dir%20%3D%3D%20%22R%22%20then%0A%20%20%20%20%20%20.%20%2B%20%5B%7B%20x%3A%20%28last.x%20%2B%20%24steps%5B%24i%5D.n%29%2C%20y%3A%20last.y%20%7D%5D%0A%20%20%20%20elif%20%24steps%5B%24i%5D.dir%20%3D%3D%20%22L%22%20then%0A%20%20%20%20%20%20.%20%2B%20%5B%7B%20x%3A%20%28last.x%20-%20%24steps%5B%24i%5D.n%29%2C%20y%3A%20last.y%20%7D%5D%0A%20%20%20%20elif%20%24steps%5B%24i%5D.dir%20%3D%3D%20%22U%22%20then%0A%20%20%20%20%20%20.%20%2B%20%5B%7B%20x%3A%20last.x%2C%20y%3A%20%28last.y%20%2B%20%24steps%5B%24i%5D.n%29%20%7D%5D%0A%20%20%20%20else%0A%20%20%20%20%20%20.%20%2B%20%5B%7B%20x%3A%20last.x%2C%20y%3A%20%28last.y%20-%20%24steps%5B%24i%5D.n%29%20%7D%5D%0A%20%20%20%20end%0A%20%20%29%20%7C%20%7B%0A%20%20%20%20width%3A%20%28%28max_by%28.x%29.x%20-%20min_by%28.x%29.x%29%20%2B%201%29%2C%0A%20%20%20%20height%3A%20%28%28max_by%28.y%29.y%20-%20min_by%28.y%29.y%29%20%2B%201%29%2C%0A%20%20%20%20extra%3A%20%5B%28min_by%28.x%29.x%20%7C%20fabs%29%2C%20%28min_by%28.y%29.y%20%7C%20fabs%29%5D%0A%20%20%7D%0A%3B%0A%0Adef%20repeatN%28%24n%29%3A%20.%20as%20%24_%20%7C%20%5Brange%280%3B%20%24n%29%5D%20%7C%20map%28%24_%29%20%7C%20join%28%22%22%29%3B%0Adef%20stepValue%3A%0A%20%20%20%20if%20.s%20then%0A%20%20%20%20%20%20%22s%22%0A%20%20%20%20elif%20.h%20then%0A%20%20%20%20%20%20%22H%22%0A%20%20%20%20elif%20.t%20then%0A%20%20%20%20%20%20%22T%22%0A%20%20%20%20elif%20.visited%20then%0A%20%20%20%20%20%20%22%23%22%0A%20%20%20%20else%0A%20%20%20%20%20%20%22.%22%0A%20%20%20%20end%0A%3B%0Adef%20renderState%28%24grid%29%3A%0A%20%20.%20as%20%24movement%20%7C%0A%20%20reduce%20range%280%3B%20%24grid.height%29%20as%20%24y%20%28%0A%20%20%20%20%5B%5D%3B%0A%20%20%20%20.%20%2B%20%5Breduce%20range%280%3B%20%24grid.width%29%20as%20%24x%20%28%0A%20%20%20%20%20%20%5B%5D%3B%0A%20%20%20%20%20%20.%20%2B%20%5B%28%24movement%5B%24y%5D%5B%24x%5D%20%7C%20stepValue%29%20%2F%2F%20%22.%22%5D%0A%20%20%20%20%29%20%7C%20join%28%22%22%29%5D%0A%20%20%29%20%7C%20reverse%20%7C%20join%28%22%5Cn%22%29%3B%0A%0Adef%20splitter%28%24n%29%3A%20%22~%22%20%7C%20repeatN%28%24n%29%3B%0Adef%20clear%3A%20%22%5Cn%22%20%7C%20repeatN%282%29%3B%0Adef%20count%3A%20flatten%20%7C%20map%28select%28.visited%29%29%20%7C%20length%3B%0Adef%20render%28%24grid%29%3A%20%22%5C%28splitter%28%24grid.width%29%29%5Cn%5C%28renderState%28%24grid%29%29%5Cn%5C%28splitter%28%24grid.width%29%29%5Cn%5C%28count%29%5C%28clear%29%22%3B%0A%0Adef%20setInitialPoint%28%24grid%29%3A%0A%20%20%7B%20x%3A%20%24grid.extra%5B0%5D%2C%20y%3A%20%24grid.extra%5B1%5D%20%7D%20as%20%24init%20%7C%0A%20%20.grid%5B%24init.y%5D%5B%24init.x%5D%20%3D%20%7B%20visited%3A%20true%2C%20t%3A%20true%2C%20h%3A%20true%2C%20s%3A%20true%20%7D%20%2B%20%24init%20%7C%0A%20%20.head%20%3D%20%24init%20%7C%0A%20%20.tail%20%3D%20%24init%20%7C%0A%20%20.%0A%3B%0A%0Adef%20init%28%24grid%29%3A%0A%20%20reduce%20range%280%3B%20%24grid.height%29%20as%20%24y%20%28%0A%20%20%20%20%5B%5D%3B%0A%20%20%20%20.%20%2B%20%5Breduce%20range%280%3B%20%24grid.width%29%20as%20%24x%20%28%0A%20%20%20%20%20%20%5B%5D%3B%0A%20%20%20%20%20%20.%20%2B%20%5B%7B%20x%3A%20%24x%2C%20y%3A%20%24y%2C%20visited%3A%20false%20%7D%5D%0A%20%20%20%20%29%5D%0A%20%20%29%20%7C%0A%20%20%7B%20grid%3A%20.%20%7D%20%7C%0A%20%20setInitialPoint%28%24grid%29%0A%3B%0A%0A%0Adef%20remove%28%24point%29%3A%20.grid%5B.%5B%24point%5D.y%5D%5B.%5B%24point%5D.x%5D%5B%24point%5B0%3A1%5D%5D%20%3D%20false%20%7C%20.%3B%0Adef%20add%28%24point%29%3A%20.grid%5B.%5B%24point%5D.y%5D%5B.%5B%24point%5D.x%5D%5B%24point%5B0%3A1%5D%5D%20%3D%20true%20%7C%20.%3B%0A%0Adef%20visit%3A%20.grid%5B.tail.y%5D%5B.tail.x%5D.visited%20%3D%20true%20%7C%20.%20%3B%0A%0Adef%20moveSingleAxis%28%24x%3B%20%24y%29%3A%0A%20%20if%20%24x%20%3E%201%20then%0A%20%20%20%20.tail.x%20%2B%3D%20%28%24x-1%29%0A%20%20elif%20%24x%20%3C%20-1%20then%0A%20%20%20%20.tail.x%20-%3D%201%0A%20%20else%0A%20%20%20%20.%0A%20%20end%20%7C%0A%0A%20%20if%20%24y%20%3E%201%20then%0A%20%20%20%20.tail.y%20%2B%3D%20%28%24y-1%29%0A%20%20elif%20%24y%20%3C%20-1%20then%0A%20%20%20%20.tail.y%20-%3D%201%0A%20%20else%0A%20%20%20%20.%0A%20%20end%0A%3B%0A%0Adef%20moveT%3A%0A%20%20remove%28%22tail%22%29%20%7C%0A%20%20%28.head.x%20-%20.tail.x%29%20as%20%24x%20%7C%0A%20%20%28.head.y%20-%20.tail.y%29%20as%20%24y%20%7C%0A%0A%20%20if%20%24y%20%3D%3D%200%20or%20%24x%20%3D%3D%200%20then%20%23%20single%20axis%20movement%0A%20%20%20%20moveSingleAxis%28%24x%3B%20%24y%29%0A%20%20else%20%23%20diagonal%0A%20%20%20%20if%20%24y%20%7C%20fabs%20%3D%3D%202%20then%0A%20%20%20%20%20%20.tail.x%20%3D%20.head.x%20%7C%0A%20%20%20%20%20%20moveSingleAxis%280%3B%20%24y%29%0A%20%20%20%20elif%20%24x%20%7C%20fabs%20%3D%3D%202%20then%0A%20%20%20%20%20%20.tail.y%20%3D%20.head.y%20%7C%0A%20%20%20%20%20%20moveSingleAxis%28%24x%3B%200%29%0A%20%20%20%20else%0A%20%20%20%20%20%20.%0A%20%20%20%20end%0A%20%20end%20%7C%0A%20%20add%28%22tail%22%29%20%7C%0A%20%20visit%0A%3B%0A%0Adef%20moveH%28%24axis%3B%20%24direction%29%3A%0A%20%20%23%201.%20remove%20H%20from%20current%20position%0A%20%20remove%28%22head%22%29%20%7C%0A%20%20%23%202.%20update%20position%0A%20%20.head%5B%24axis%5D%20%3D%20%28.head%5B%24axis%5D%20%2B%20%24direction%29%20%7C%0A%20%20%23%203.%20update%20H%0A%20%20add%28%22head%22%29%20%7C%0A%20%20moveT%0A%3B%0Adef%20moveH%28%24axis%29%3A%20moveH%28%24axis%3B%201%29%3B%0A%0A%0Adef%20walkSteps%28%24state%3B%20%24grid%29%3A%0A%20%20.%20as%20%24steps%20%7C%0A%20%20foreach%20range%280%3B%20length%29%20as%20%24i%20%28%0A%20%20%20%20%24state%3B%0A%20%20%20%20%23%20update%0A%20%20%20%20%24steps%5B%24i%5D%20as%20%24dir%20%7C%0A%0A%20%20%20%20if%20%24dir%20%3D%3D%20%22R%22%20then%0A%20%20%20%20%20%20moveH%28%22x%22%29%0A%20%20%20%20elif%20%24dir%20%3D%3D%20%22L%22%20then%0A%20%20%20%20%20%20moveH%28%22x%22%3B%20-1%29%0A%20%20%20%20elif%20%24dir%20%3D%3D%20%22D%22%20then%0A%20%20%20%20%20%20moveH%28%22y%22%3B%20-1%29%0A%20%20%20%20else%0A%20%20%20%20%20%20moveH%28%22y%22%29%0A%20%20%20%20end%3B%0A%20%20%20%20.grid%20%7C%20render%28%24grid%29%0A%20%20%29%0A%3B%0A%0Adef%20explodeSteps%3A%0A%20%20reduce%20.%5B%5D%20as%20%24step%20%28%0A%20%20%20%20%5B%5D%3B%0A%20%20%20%20.%20%2B%20%28%5Brange%280%3B%20%24step.n%29%5D%20%7C%20map%28%24step.dir%29%29%0A%20%20%29%0A%3B%0A%0Aparse%20%7C%0AcalcGrid%20as%20%24grid%20%7C%0AexplodeSteps%20%7C%0AwalkSteps%28init%28%24grid%29%3B%20%24grid%29%0A&slurp=true&raw-input=true&raw=true), [part 2](https://jqterm.com/304f9590d16035b539a8435f44440896?query=def%20log%28s%29%3A%20.%20as%20%24_%20%7C%20if%20%5Bs%5D%20%7C%20length%20%3E%200%20then%20%5Bs%5D%20%7C%20debug%20else%20empty%20end%20%7C%20%24_%3B%0Adef%20log%28s%29%3A%20.%3B%20%23%20this%20let%27s%20me%20turn%20logging%20on%20and%20off%20easily%0A%0Adef%20parse%3A%20split%28%22%5Cn%22%29%20%7C%20map%28select%28.%20!%3D%20%22%22%29%20%7C%20split%28%22%20%22%29%20%7C%20%7B%20dir%3A%20.%5B0%5D%2C%20n%3A%20.%5B1%5D%20%7C%20tonumber%20%7D%29%20%3B%0A%0Adef%20calcGrid%3A%0A%20%20%5B%7B%20%20x%3A%200%2C%20y%3A%200%20%7D%5D%20as%20%24grid%20%7C%0A%20%20.%20as%20%24steps%20%7C%0A%20%20reduce%20range%280%3B%20length%29%20as%20%24i%20%28%0A%20%20%20%20%24grid%3B%0A%20%20%20%20if%20%24steps%5B%24i%5D.dir%20%3D%3D%20%22R%22%20then%0A%20%20%20%20%20%20.%20%2B%20%5B%7B%20x%3A%20%28last.x%20%2B%20%24steps%5B%24i%5D.n%29%2C%20y%3A%20last.y%20%7D%5D%0A%20%20%20%20elif%20%24steps%5B%24i%5D.dir%20%3D%3D%20%22L%22%20then%0A%20%20%20%20%20%20.%20%2B%20%5B%7B%20x%3A%20%28last.x%20-%20%24steps%5B%24i%5D.n%29%2C%20y%3A%20last.y%20%7D%5D%0A%20%20%20%20elif%20%24steps%5B%24i%5D.dir%20%3D%3D%20%22U%22%20then%0A%20%20%20%20%20%20.%20%2B%20%5B%7B%20x%3A%20last.x%2C%20y%3A%20%28last.y%20%2B%20%24steps%5B%24i%5D.n%29%20%7D%5D%0A%20%20%20%20else%0A%20%20%20%20%20%20.%20%2B%20%5B%7B%20x%3A%20last.x%2C%20y%3A%20%28last.y%20-%20%24steps%5B%24i%5D.n%29%20%7D%5D%0A%20%20%20%20end%0A%20%20%29%20%7C%20%7B%0A%20%20%20%20width%3A%20%28%28max_by%28.x%29.x%20-%20min_by%28.x%29.x%29%20%2B%201%29%2C%0A%20%20%20%20height%3A%20%28%28max_by%28.y%29.y%20-%20min_by%28.y%29.y%29%20%2B%201%29%2C%0A%20%20%20%20extra%3A%20%5B%28min_by%28.x%29.x%20%7C%20fabs%29%2C%20%28min_by%28.y%29.y%20%7C%20fabs%29%5D%0A%20%20%7D%0A%3B%0A%0Adef%20repeatN%28%24n%29%3A%20.%20as%20%24_%20%7C%20%5Brange%280%3B%20%24n%29%5D%20%7C%20map%28%24_%29%20%7C%20join%28%22%22%29%3B%0Adef%20stepValue%28%24tail%3B%20%24x%3B%20%24y%29%3A%0A%20%20%20%20%28%24tail%20%7C%20index%28%7B%20x%3A%20%24x%2C%20y%3A%20%24y%20%7D%29%29%20as%20%24index%20%7C%0A%20%20%20%20if%20.s%20then%0A%20%20%20%20%20%20%22s%22%0A%20%20%20%20elif%20.h%20then%0A%20%20%20%20%20%20%22H%22%0A%20%20%20%20elif%20.t%20then%0A%20%20%20%20%20%20%22T%22%0A%20%20%20%20elif%20.visited%20then%0A%20%20%20%20%20%20%22%23%22%0A%20%20%20%20elif%20%24index%20!%3D%20null%20then%0A%20%20%20%20%20%20%24index%20%7C%20tostring%0A%20%20%20%20else%0A%20%20%20%20%20%20%22.%22%0A%20%20%20%20end%0A%3B%0Adef%20renderState%28%24grid%29%3A%0A%20%20.snake%20as%20%24tail%20%7C%0A%20%20.grid%20as%20%24movement%20%7C%0A%20%20reduce%20range%280%3B%20%24grid.height%29%20as%20%24y%20%28%0A%20%20%20%20%5B%5D%3B%0A%20%20%20%20.%20%2B%20%5Breduce%20range%280%3B%20%24grid.width%29%20as%20%24x%20%28%0A%20%20%20%20%20%20%5B%5D%3B%0A%20%20%20%20%20%20.%20%2B%20%5B%28%24movement%5B%24y%5D%5B%24x%5D%20%7C%20stepValue%28%24tail%3B%20%24x%3B%20%24y%29%29%20%2F%2F%20%22.%22%5D%0A%20%20%20%20%29%20%7C%20join%28%22%22%29%5D%0A%20%20%29%20%7C%20reverse%20%7C%20join%28%22%5Cn%22%29%3B%0A%0Adef%20splitter%28%24n%29%3A%20%22~%22%20%7C%20repeatN%28%24n%29%3B%0Adef%20clear%3A%20%22%5Cn%22%20%7C%20repeatN%282%29%3B%0Adef%20count%3A%20flatten%20%7C%20map%28select%28.visited%29%29%20%7C%20length%3B%0Adef%20render%28%24grid%29%3A%20%22%5C%28splitter%28%24grid.width%29%29%5Cn%5C%28renderState%28%24grid%29%29%5Cn%5C%28splitter%28%24grid.width%29%29%5Cn%5C%28count%29%5C%28clear%29%22%3B%0A%0Adef%20setInitialPoint%28%24grid%29%3A%0A%20%20%7B%20x%3A%20%24grid.extra%5B0%5D%2C%20y%3A%20%24grid.extra%5B1%5D%20%7D%20as%20%24init%20%7C%0A%20%20log%28%22init%22%2C%20%24init%29%20%7C%0A%20%20.grid%5B%24init.y%5D%5B%24init.x%5D%20%3D%20%7B%20visited%3A%20true%2C%20h%3A%20true%2C%20s%3A%20true%20%7D%20%2B%20%24init%20%7C%0A%20%20.snake%20%3D%20%28%5Brange%280%3B9%29%5D%20%7C%20map%28%24init%29%29%20%7C%0A%20%20.tail%20%3D%20%24init%20%7C%0A%20%20.head%20%3D%20%24init%20%7C%0A%20%20.%0A%3B%0A%0Adef%20init%28%24grid%29%3A%0A%20%20reduce%20range%280%3B%20%24grid.height%29%20as%20%24y%20%28%0A%20%20%20%20%5B%5D%3B%0A%20%20%20%20.%20%2B%20%5Breduce%20range%280%3B%20%24grid.width%29%20as%20%24x%20%28%0A%20%20%20%20%20%20%5B%5D%3B%0A%20%20%20%20%20%20.%20%2B%20%5B%7B%20x%3A%20%24x%2C%20y%3A%20%24y%2C%20visited%3A%20false%20%7D%5D%0A%20%20%20%20%29%5D%0A%20%20%29%20%7C%0A%20%20%7B%20grid%3A%20.%20%7D%20%7C%0A%20%20setInitialPoint%28%24grid%29%0A%3B%0A%0A%0Adef%20remove%28%24point%29%3A%20.grid%5B.%5B%24point%5D.y%5D%5B.%5B%24point%5D.x%5D%5B%24point%5B0%3A1%5D%5D%20%3D%20false%20%7C%20.%3B%0Adef%20add%28%24point%29%3A%20.grid%5B.%5B%24point%5D.y%5D%5B.%5B%24point%5D.x%5D%5B%24point%5B0%3A1%5D%5D%20%3D%20true%20%7C%20.%3B%0A%0Adef%20visit%3A%20.grid%5B.tail.y%5D%5B.tail.x%5D.visited%20%3D%20true%20%7C%20.%20%3B%0A%0Adef%20moveSingleAxis%28%24x%3B%20%24y%29%3A%0A%20%20if%20%24x%20%3E%201%20then%0A%20%20%20%20.tail.x%20%2B%3D%20%28%24x-1%29%0A%20%20elif%20%24x%20%3C%20-1%20then%0A%20%20%20%20.tail.x%20-%3D%201%0A%20%20else%0A%20%20%20%20.%0A%20%20end%20%7C%0A%0A%20%20if%20%24y%20%3E%201%20then%0A%20%20%20%20.tail.y%20%2B%3D%20%28%24y-1%29%0A%20%20elif%20%24y%20%3C%20-1%20then%0A%20%20%20%20.tail.y%20-%3D%201%0A%20%20else%0A%20%20%20%20.%0A%20%20end%0A%3B%0A%0Adef%20moveT%28%24head%29%3A%0A%20%20%28%24head.x%20-%20.tail.x%29%20as%20%24x%20%7C%0A%20%20%28%24head.y%20-%20.tail.y%29%20as%20%24y%20%7C%0A%0A%20%20if%20%24y%20%3D%3D%200%20or%20%24x%20%3D%3D%200%20then%20%23%20single%20axis%20movement%0A%20%20%20%20moveSingleAxis%28%24x%3B%20%24y%29%0A%20%20else%20%23%20diagonal%0A%20%20%20%20if%20%24y%20%7C%20fabs%20%3D%3D%202%20then%0A%20%20%20%20%20%20.tail.x%20%3D%20%24head.x%20%7C%0A%20%20%20%20%20%20moveSingleAxis%280%3B%20%24y%29%0A%20%20%20%20elif%20%24x%20%7C%20fabs%20%3D%3D%202%20then%0A%20%20%20%20%20%20.tail.y%20%3D%20%24head.y%20%7C%0A%20%20%20%20%20%20moveSingleAxis%28%24x%3B%200%29%0A%20%20%20%20else%0A%20%20%20%20%20%20.%0A%20%20%20%20end%0A%20%20end%0A%3B%0A%0Adef%20moveTails%3A%0A%20%20reduce%20range%280%3B%20.snake%20%7C%20length%29%20as%20%24i%20%28%0A%20%20%20%20.%3B%0A%20%20%20%20.tail%20%3D%20.snake%5B%24i%5D%20%7C%0A%20%20%20%20moveT%28if%20%24i%20%3D%3D%200%20then%20.head%20else%20.snake%5B%24i%20-%201%5D%20end%29%20%7C%0A%20%20%20%20.snake%5B%24i%5D%20%3D%20.tail%0A%20%20%29%20%7C%0A%20%20visit%20%23%20only%20apply%20to%20the%20_end_%20of%20the%20tail%0A%3B%0A%0Adef%20moveH%28%24axis%3B%20%24direction%29%3A%0A%20%20remove%28%22head%22%29%20%7C%0A%20%20.head%5B%24axis%5D%20%3D%20%28.head%5B%24axis%5D%20%2B%20%24direction%29%20%7C%0A%20%20add%28%22head%22%29%20%7C%0A%20%20moveTails%0A%3B%0Adef%20moveH%28%24axis%29%3A%20moveH%28%24axis%3B%201%29%3B%0A%0A%0Adef%20walkSteps%28%24state%3B%20%24grid%29%3A%0A%20%20.%20as%20%24steps%20%7C%0A%20%20foreach%20range%280%3B%20length%29%20as%20%24i%20%28%0A%20%20%20%20%24state%3B%0A%20%20%20%20%23%20update%0A%20%20%20%20%24steps%5B%24i%5D%20as%20%24dir%20%7C%0A%0A%20%20%20%20if%20%24dir%20%3D%3D%20%22R%22%20then%0A%20%20%20%20%20%20log%28%22R%22%29%20%7C%0A%20%20%20%20%20%20moveH%28%22x%22%29%0A%20%20%20%20elif%20%24dir%20%3D%3D%20%22L%22%20then%0A%20%20%20%20%20%20log%28%22L%22%29%20%7C%0A%20%20%20%20%20%20moveH%28%22x%22%3B%20-1%29%0A%20%20%20%20elif%20%24dir%20%3D%3D%20%22D%22%20then%0A%20%20%20%20%20%20log%28%22D%22%29%20%7C%0A%20%20%20%20%20%20moveH%28%22y%22%3B%20-1%29%0A%20%20%20%20else%0A%20%20%20%20%20%20log%28%22U%22%29%20%7C%0A%20%20%20%20%20%20moveH%28%22y%22%29%0A%20%20%20%20end%3B%0A%20%20%20%20render%28%24grid%29%0A%20%20%29%0A%3B%0A%0Adef%20explodeSteps%3A%0A%20%20reduce%20.%5B%5D%20as%20%24step%20%28%0A%20%20%20%20%5B%5D%3B%0A%20%20%20%20.%20%2B%20%28%5Brange%280%3B%20%24step.n%29%5D%20%7C%20map%28%24step.dir%29%29%0A%20%20%29%0A%3B%0A%0Aparse%20%7C%0AcalcGrid%20as%20%24grid%20%7C%0AexplodeSteps%20%7C%0AwalkSteps%28init%28%24grid%29%3B%20%24grid%29%0A&slurp=true&raw-input=true&raw=true) (note that part 2 struggles to run in the browser if the input is moddified, due to the size of memory required)
